import{d as H,p as c,ak as j,h as _,q,c as g,o as k,n as m,G as h,w as f,k as O,b as P,Z as v,j as n,F as W,B as z,ae as C,a as p,ad as T}from"./chunks/framework.DWuqvBrN.js";import{d as G,_ as J}from"./chunks/Tooltip.vue_vue_type_script_setup_true_lang.C_Gug5m1.js";import{_ as Z}from"./chunks/Input.vue_vue_type_script_setup_true_lang.CfNxgRCJ.js";import{_ as R}from"./chunks/Icon.vue_vue_type_script_setup_true_lang.CcjK3qIw.js";import{R as K}from"./chunks/RenderVNode.XTpTx_1g.js";import"./chunks/theme.4d3g8GNZ.js";const Q={class:"mr-select__menu"},X=["id","onClick"],u=H({name:"MercurySelect",__name:"Select",props:{modelValue:{},options:{},placeholder:{},disabled:{type:Boolean},clearable:{type:Boolean},filterable:{type:Boolean},filterFunc:{type:Function},renderLabel:{type:Function}},emits:["change","update:modelValue","visible-change","clear"],setup(B,{emit:y}){const e=B,s=y,d=i=>{const t=e.options.find(l=>l.value===i);return t||null},F=d(e.modelValue),w={modifiers:[{name:"offset",options:{offset:[0,9]}},{name:"sameWidth",enabled:!0,fn:({state:i})=>{i.styles.popper.width=`${i.rects.reference.width}px`},phase:"beforeWrite",requires:["computeStyles"]}]},b=c(),V=c(),o=c(!1),r=c(e.options),a=j({inputValue:F?F.label:"",selectedOption:F,mouseHover:!1}),I=_(()=>e.clearable&&a.mouseHover&&a.selectedOption&&a.inputValue.trim()!==""),N=_(()=>e.filterable&&a.selectedOption&&o.value?a.selectedOption.label:e.placeholder),E=i=>{var t,l;i?(e.filterable&&a.selectedOption&&(a.inputValue=""),e.filterable&&S(a.inputValue),(t=b.value)==null||t.open()):((l=b.value)==null||l.close(),e.filterable&&(a.inputValue=a.selectedOption?a.selectedOption.label:"")),o.value=i,s("visible-change",i)},$=()=>{e.disabled||(o.value?E(!1):E(!0))},x=i=>{var t;i.disabled||(a.inputValue=i.label,a.selectedOption=i,s("change",i.value),s("update:modelValue",i.value),E(!1),(t=V.value)==null||t.ref.focus())},A=i=>{i?a.mouseHover=!0:a.mouseHover=!1},L=()=>{a.selectedOption=null,a.inputValue="",s("clear"),s("change",""),s("update:modelValue","")},S=i=>{e.filterable&&(e.filterFunc?r.value=e.filterFunc(i):r.value=e.options.filter(t=>t.label.includes(i)),console.log(r.value))},M=G(()=>{S(a.inputValue)}),U=()=>{};return q(()=>e.modelValue,i=>{const t=d(i);a.inputValue=t?t.label:""}),q(()=>e.options,i=>{r.value=i}),(i,t)=>(k(),g("div",{class:m(["mr-select",{"is-disabled":i.disabled}]),onClick:$,onMouseenter:t[2]||(t[2]=l=>A(!0)),onMouseleave:t[3]||(t[3]=l=>A(!1))},[h(J,{placement:"bottom-start",ref_key:"tooltipRef",ref:b,"popper-options":w,onClickOutside:t[1]||(t[1]=l=>E(!1)),manual:""},{content:f(()=>[n("ul",Q,[(k(!0),g(W,null,z(r.value,l=>{var D;return k(),g("li",{key:l.value,class:m(["mr-select__menu-item",{"is-disabled":l.disabled,"is-selected":((D=a.selectedOption)==null?void 0:D.value)===l.value}]),id:`select-item-${l.value}`,onClick:v(ss=>x(l),["stop"])},[h(O(K),{vnode:i.renderLabel?i.renderLabel(l):l.label},null,8,["vnode"])],10,X)}),128))])]),default:f(()=>[h(Z,{modelValue:a.inputValue,"onUpdate:modelValue":t[0]||(t[0]=l=>a.inputValue=l),disabled:i.disabled,placeholder:N.value,readonly:!i.filterable||!o.value,ref_key:"inputRef",ref:V,onInput:O(M)},{suffix:f(()=>[I.value?(k(),P(R,{key:0,icon:"circle-xmark",class:"mr-input__clear",onMousedown:v(U,["prevent"]),onClick:v(L,["stop"])})):(k(),P(R,{key:1,icon:"angle-down",class:m(["header-angle",{"is-active":o.value}])},null,8,["class"]))]),_:1},8,["modelValue","disabled","placeholder","readonly","onInput"])]),_:1},512)],34))}}),ds=JSON.parse('{"title":"Select","description":"当选项过多时，使用下拉菜单展示并选择内容。","frontmatter":{"title":"Select","description":"当选项过多时，使用下拉菜单展示并选择内容。"},"headers":[],"relativePath":"components/select.md","filePath":"components/select.md"}'),Y={name:"components/select.md"},ps=Object.assign(Y,{setup(B){const y=e=>T("div",T("b",e.label));return(e,s)=>(k(),g("div",null,[s[4]||(s[4]=n("h1",{id:"select-组件",tabindex:"-1"},[p("Select 组件 "),n("a",{class:"header-anchor",href:"#select-组件","aria-label":'Permalink to "Select 组件"'},"​")],-1)),s[5]||(s[5]=n("p",null,"当选项过多时，使用下拉菜单展示并选择内容。",-1)),s[6]||(s[6]=n("h2",{id:"基础用法",tabindex:"-1"},[p("基础用法 "),n("a",{class:"header-anchor",href:"#基础用法","aria-label":'Permalink to "基础用法"'},"​")],-1)),s[7]||(s[7]=n("p",null,[p("通过 "),n("code",null,"v-model"),p(" 绑定选中值，使用 "),n("code",null,"options"),p(" 定义选项列表。")],-1)),h(u,{modelValue:e.selected,"onUpdate:modelValue":s[0]||(s[0]=d=>e.selected=d),options:[{label:"选项1",value:"1"},{label:"选项2",value:"2"},{label:"禁用选项",value:"3",disabled:!0}],placeholder:"请选择"},null,8,["modelValue"]),s[8]||(s[8]=C("",3)),h(u,{modelValue:e.selected,"onUpdate:modelValue":s[1]||(s[1]=d=>e.selected=d),options:[{label:"<b>标签选项1",value:"1"},{label:"<b>标签选项2",value:"2"},{label:"禁用选项",value:"3",disabled:!0}],renderLabel:y},null,8,["modelValue"]),s[9]||(s[9]=C("",3)),h(u,{modelValue:e.selected,"onUpdate:modelValue":s[2]||(s[2]=d=>e.selected=d),options:[{label:"选项1",value:"1"},{label:"选项2",value:"2"},{label:"禁用选项",value:"3",disabled:!0}],clearable:""},null,8,["modelValue"]),s[10]||(s[10]=n("h2",{id:"筛选选项",tabindex:"-1"},[p("筛选选项 "),n("a",{class:"header-anchor",href:"#筛选选项","aria-label":'Permalink to "筛选选项"'},"​")],-1)),s[11]||(s[11]=n("p",null,[p("启用 "),n("code",null,"filterable"),p(" 属性后支持输入筛选，可通过 "),n("code",null,"filterFunc"),p(" 自定义筛选逻辑。")],-1)),h(u,{modelValue:e.selected,"onUpdate:modelValue":s[3]||(s[3]=d=>e.selected=d),options:[{label:"选项1",value:"1"},{label:"选项2",value:"2"},{label:"禁用选项",value:"3",disabled:!0}],filterable:""},null,8,["modelValue"]),s[12]||(s[12]=C("",7))]))}});export{ds as __pageData,ps as default};
