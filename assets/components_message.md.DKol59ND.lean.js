import{d as A,ah as R,q as V,v as M,Y as O,k as a,p as f,h as m,b as _,o as v,w as k,af as z,j as p,N as L,n as Z,c as T,e as x,r as j,G as d,Z as G,ag as H,T as J,ai as U,ad as I,aj as q,ae as C,a as l}from"./chunks/framework.BCv1gK7J.js";import{_ as Y}from"./chunks/Icon.vue_vue_type_script_setup_true_lang.CB2nQw5p.js";import{_ as o}from"./chunks/Button.vue_vue_type_script_setup_true_lang.BT0t3UF_.js";import"./chunks/theme.DiswZq2Y.js";import"./chunks/isObject.D7bzW4Uf.js";const K=A({props:{vnode:{type:[String,Object],required:!0}},setup({vnode:e}){return()=>e}}),Q=(e,t,s)=>{R(e)?V(e,(i,n)=>{n==null||n.removeEventListener(t,s),i==null||i.addEventListener(t,s)}):M(()=>{e.addEventListener(t,s)}),O(()=>{var i;(i=a(e))==null||i.removeEventListener(t,s)})},W={class:"mr-message__content"},X={key:0,class:"mr-message__close"},ss=A({name:"Mercury-Message",__name:"Message",props:{message:{},duration:{default:3e3},showClose:{type:Boolean},type:{default:"info"},onDestroy:{},offset:{default:20},id:{},zIndex:{}},setup(e,{expose:t}){const s=e;let i;const n=f(!1),y=f(),g=f(0),B=m(()=>as(s.id)),c=m(()=>B.value+s.offset),r=m(()=>c.value+g.value),F=m(()=>({top:c.value+"px",zIndex:s.zIndex})),b=()=>{s.duration!==0&&(i=setTimeout(()=>{n.value=!1},s.duration))},D=()=>{clearTimeout(i)},P=()=>{n.value=!1};Q(document,"keydown",u=>{u.code==="Escape"&&(n.value=!1)});const S=()=>{s.onDestroy()},N=()=>{g.value=y.value.getBoundingClientRect().height};return M(()=>{n.value=!0,b()}),t({bottomOffset:r,visible:n}),(u,$)=>(v(),_(J,{onEnter:N,onAfterLeave:S,name:"fade-up"},{default:k(()=>[z(p("div",{class:Z(["mr-message",{[`mr-message--${u.type}`]:u.type,"is-close":u.showClose}]),role:"alert",ref_key:"messageRef",ref:y,style:L(F.value),onMouseenter:D,onMouseleave:b},[p("div",W,[j(u.$slots,"default",{},()=>[s.message?(v(),_(a(K),{key:0,vnode:s.message},null,8,["vnode"])):x("",!0)])]),s.showClose?(v(),T("div",X,[d(Y,{icon:"xmark",onClick:G(P,["stop"])})])):x("",!0)],38),[[H,n.value]])]),_:3}))}}),w=f(0),is=(e=200)=>{const t=f(e),s=m(()=>w.value+t.value);return{initZIndex:t,currentZIndex:s,nextZIndex:()=>(w.value++,s.value)}},E=U([]),{nextZIndex:ts}=is();let es=1;const h=e=>{const t=`message_${es++}`,s=document.createElement("div"),i=()=>{const r=E.findIndex(F=>F.id===t);r<0||(E.splice(r,1),q(null,s))},n=()=>{const r=E.find(F=>F.id===t);r&&(r.vm.exposed.visible.value=!1)},y={...e,id:t,zIndex:ts(),onDestroy:i},g=I(ss,y);q(g,s),document.body.appendChild(s.firstElementChild);const B=g.component,c={id:t,vnode:g,vm:B,props:y,destroy:n};return E.push(c),c},as=e=>{const t=E.findIndex(i=>i.id===e);return t<=0?0:E[t-1].vm.exposed.bottomOffset.value},ns=()=>{E.forEach(e=>e.destroy())},rs=JSON.parse('{"title":"Message","description":"Message 组件文档","frontmatter":{"title":"Message","description":"Message 组件文档"},"headers":[],"relativePath":"components/message.md","filePath":"components/message.md"}'),ls={name:"components/message.md"},Es=Object.assign(ls,{setup(e){return(t,s)=>(v(),T("div",null,[s[18]||(s[18]=p("h1",{id:"message-组件",tabindex:"-1"},[l("Message 组件 "),p("a",{class:"header-anchor",href:"#message-组件","aria-label":'Permalink to "Message 组件"'},"​")],-1)),s[19]||(s[19]=p("p",null,"用于显示全局消息提示，支持多种类型和自定义配置。",-1)),s[20]||(s[20]=p("h2",{id:"基础用法",tabindex:"-1"},[l("基础用法 "),p("a",{class:"header-anchor",href:"#基础用法","aria-label":'Permalink to "基础用法"'},"​")],-1)),s[21]||(s[21]=p("p",null,"从顶部出现，3 秒后自动消失。 提供 Message 方法用于调用。 Message 可以接收一个字符串或一个 VNode 作为参数，它会被显示为正文内容。",-1)),d(o,{type:"primary",onClick:s[0]||(s[0]=i=>a(h)({message:"hello world"}))},{default:k(()=>s[9]||(s[9]=[l(" 创建一条消息 ")])),_:1,__:[9]}),d(o,{onClick:s[1]||(s[1]=i=>a(h)({message:I("b","this is bold")}))},{default:k(()=>s[10]||(s[10]=[l(" 创建支持 VNode 的消息 ")])),_:1,__:[10]}),s[22]||(s[22]=C("",3)),d(o,{onClick:s[2]||(s[2]=i=>a(h)({message:"hello world",type:"success"}))},{default:k(()=>s[11]||(s[11]=[l(" Success ")])),_:1,__:[11]}),d(o,{onClick:s[3]||(s[3]=i=>a(h)({message:"hello world",type:"info"}))},{default:k(()=>s[12]||(s[12]=[l(" Info ")])),_:1,__:[12]}),d(o,{onClick:s[4]||(s[4]=i=>a(h)({message:"hello world",type:"warning"}))},{default:k(()=>s[13]||(s[13]=[l(" warning ")])),_:1,__:[13]}),d(o,{onClick:s[5]||(s[5]=i=>a(h)({message:"hello world",type:"danger"}))},{default:k(()=>s[14]||(s[14]=[l(" Danger ")])),_:1,__:[14]}),s[23]||(s[23]=C("",3)),d(o,{onClick:s[6]||(s[6]=i=>a(h)({message:"hello world",showClose:!0,duration:0}))},{default:k(()=>s[15]||(s[15]=[l(" 可关闭消息 ")])),_:1,__:[15]}),s[24]||(s[24]=C("",3)),d(o,{onClick:s[7]||(s[7]=()=>{a(h)({message:"hello world1",duration:0}),a(h)({message:"hello world2",duration:0}),a(h)({message:"hello world3",duration:0})})},{default:k(()=>s[16]||(s[16]=[l(" 创建三条消息 ")])),_:1,__:[16]}),d(o,{onClick:s[8]||(s[8]=()=>{a(ns)()})},{default:k(()=>s[17]||(s[17]=[l(" 全部关闭 ")])),_:1,__:[17]}),s[25]||(s[25]=C("",9))]))}});export{rs as __pageData,Es as default};
